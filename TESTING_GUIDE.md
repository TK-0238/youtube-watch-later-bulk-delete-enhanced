# YouTube Watch Later Bulk Delete - 最終テストガイド

## 🔍 主要な修正内容

### タイトルフィルター機能の改善（強化版）
- **問題**: 検索窓でキーワード検索しても関連動画が表示されない（特に漢字検索が弱い）
- **解決**: 複数のセレクターを使用した堅牢なタイトル検出システムを実装
- **改善**: 部分一致検索の精度向上とエラーハンドリング強化
- **新機能**: 日本語文字列正規化による漢字・ひらがな・カタカナ横断検索

## 📋 テスト手順

### 1. 基本セットアップ

#### 拡張機能のインストール
1. Chrome拡張機能管理ページを開く: `chrome://extensions/`
2. 「デベロッパーモード」を有効にする
3. 「パッケージ化されていない拡張機能を読み込む」をクリック
4. `youtube-watch-later-bulk-delete` フォルダを選択

#### 必要な権限の確認
- ✅ `storage` - 設定とデータの保存
- ✅ `activeTab` - アクティブタブへのアクセス  
- ✅ `notifications` - 削除完了通知
- ✅ `https://www.youtube.com/*` - YouTube ホスト権限

### 2. タイトルフィルター機能のテスト（重要）

#### テスト環境の準備
1. YouTube「後で見る」プレイリストにアクセス: `https://www.youtube.com/playlist?list=WL`
2. 複数の動画が存在することを確認（少なくとも5-10個）
3. 異なるタイトルの動画があることを確認

#### フィルター機能の動作確認
1. **拡張機能の有効化**
   - 拡張機能アイコンをクリックまたはポップアップを開く
   - 「一括削除モード」を「有効にする」に切り替え

2. **基本部分一致検索のテスト**
   ```
   例: 動画タイトルが「【Python】機械学習入門講座」の場合
   
   ✅ 動作するべき検索例:
   - "Python" → 該当動画が表示される
   - "機械学習" → 該当動画が表示される  
   - "入門" → 該当動画が表示される
   - "講座" → 該当動画が表示される
   - "python"（小文字） → 該当動画が表示される
   ```

3. **強化された日本語検索のテスト**
   ```
   例: 動画タイトルが「【React】コンポーネント設計講座」の場合
   
   ✅ 漢字検索:
   - "設計" → 該当動画が表示される
   - "講座" → 該当動画が表示される
   
   ✅ ひらがな・カタカナ相互検索:
   - "コンポーネント" → 該当動画が表示される
   - "こんぽーねんと" → 該当動画が表示される（ひらがなでも検索可能）
   
   ✅ 全角・半角統一:
   - "React" → 該当動画が表示される
   - "Ｒｅａｃｔ"（全角） → 該当動画が表示される
   - "ｒｅａｃｔ"（全角小文字） → 該当動画が表示される
   
   ✅ 複合検索:
   - "設計 講座" → 該当動画が表示される
   - "react 設計" → 該当動画が表示される
   ```

4. **特殊文字・記号を含むタイトルのテスト**
   ```
   例: 動画タイトルが「【JavaScript】ES6の新機能！」の場合
   
   ✅ 記号無視検索:
   - "ES6" → 該当動画が表示される
   - "新機能" → 該当動画が表示される
   - "javascript" → 該当動画が表示される
   ```

3. **フィルター結果の確認**
   - 検索窓に入力後、動画リストが即座に更新される
   - 該当しない動画は非表示になる
   - 該当する動画のみが表示される
   - 検索窓をクリアすると全動画が再表示される

#### よくある問題と確認ポイント
- **動画が表示されない場合**: コンソールログを確認（F12 → Console）
- **検索が効かない場合**: ページをリロードして再試行
- **部分的にしか動作しない場合**: 異なるタイトル形式でテスト

### 3. 基本機能のテスト

#### 選択機能
1. **個別選択**
   - 各動画のチェックボックスをクリック
   - 選択状態の視覚的フィードバック確認

2. **全選択/全解除**
   - 「すべて選択」ボタンをクリック
   - 全ての表示中動画が選択される
   - 「すべて解除」ボタンで全選択解除

3. **フィルター + 選択の組み合わせ**
   - キーワードでフィルタリング
   - フィルター結果の一部を選択
   - 「すべて選択」で フィルター結果全体を選択

#### 削除機能
1. **選択削除**
   - 数個の動画を選択
   - 「選択した動画を削除」をクリック
   - 確認ダイアログが表示される
   - 削除実行と進捗表示を確認

2. **全削除**
   - 「すべて削除」ボタンのテスト
   - 確認ダイアログの表示確認
   - キャンセル機能のテスト

### 4. 通知とフィードバック

#### 削除通知
- 削除開始時: バッジ表示が「...」に変化
- 削除中: 進捗パーセンテージの表示
- 削除完了: 通知が表示される
- キャンセル時: 適切なメッセージ

#### エラーハンドリング
- ネットワークエラー時の表示
- YouTube側のエラー時の対応
- 予期しないエラーの処理

### 5. ポップアップ機能

#### 統計情報
- 総削除数の表示
- 使用日数の計算
- 最終使用日時の記録

#### 設定機能
- 削除前確認の有効/無効
- 通知表示の設定
- バッチサイズの調整

### 6. パフォーマンステスト

#### 大量動画での動作
- 100個以上の動画がある場合
- フィルタリングの応答速度
- 削除処理の安定性

#### メモリ使用量
- 長時間使用時のメモリリーク確認
- 複数タブ同時使用時の動作

## 🐛 トラブルシューティング

### よくある問題

1. **タイトルフィルターが効かない**
   ```javascript
   // コンソールで確認
   console.log('Filter videos called with:', searchTerm);
   ```

2. **選択が保持されない**
   - ページリロード確認
   - ストレージの状態確認

3. **削除が途中で止まる**
   - ネットワーク接続確認
   - YouTube側のレート制限確認

### デバッグ方法
1. Chrome DevTools を開く（F12）
2. Console タブでエラーメッセージ確認
3. Application → Storage → Local Storage でデータ確認

## ✅ 最終チェックリスト

### 基本機能
- [ ] 拡張機能の有効化/無効化
- [ ] 個別動画の選択/解除
- [ ] 全選択/全解除機能
- [ ] 削除実行と進捗表示
- [ ] キャンセル機能

### タイトルフィルター（重要・強化版）
- [ ] 完全一致検索
- [ ] 部分一致検索
- [ ] 大文字小文字無視
- [ ] 複数キーワード検索
- [ ] 特殊文字を含むタイトル
- [ ] 日本語/英数字混在タイトル

#### 日本語検索強化機能
- [ ] 漢字での部分一致検索
- [ ] ひらがな・カタカナ相互変換検索
- [ ] 全角・半角文字統一検索
- [ ] Unicode正規化処理
- [ ] 半角カタカナ→全角カタカナ変換
- [ ] 濁点・半濁点付き文字の正規化
- [ ] 複数バリアント同時検索

### 通知とUI
- [ ] 削除開始/完了通知
- [ ] エラー通知
- [ ] バッジ更新
- [ ] 統計情報表示

### 設定とデータ
- [ ] 設定の保存/復元
- [ ] 統計データの更新
- [ ] 多言語対応（日本語/英語）

## 📝 レポート形式

テスト完了後、以下の情報を記録してください：

```
テスト日時: [YYYY-MM-DD HH:MM]
Chrome バージョン: [version]
テスト動画数: [number]

✅ 成功したテスト:
- タイトルフィルター部分一致: ○
- 全選択機能: ○
- 削除機能: ○
- ...

❌ 失敗したテスト:
- [具体的な問題と再現手順]

🔧 推奨改善点:
- [改善提案]
```

## 🎯 成功基準

このテストガイドでは以下を満たすことが目標です：

1. **タイトルフィルター**: キーワード検索で関連動画が正確に表示される
2. **部分一致**: 完全なタイトルでなくても該当動画が見つかる
3. **日本語検索**: 漢字・ひらがな・カタカナで横断的に検索できる
4. **文字正規化**: 全角・半角の違いや文字種の違いを吸収する
5. **安定性**: エラーなく繰り返し使用できる
6. **パフォーマンス**: 大量の動画でも快適に動作する
7. **ユーザビリティ**: 直感的で分かりやすい操作

## 🔧 技術的改善点

### 実装された日本語検索強化機能

1. **Unicode正規化**: NFKC正規化による文字統一
2. **全角・半角変換**: ASCII文字の統一処理
3. **カタカナ・ひらがな変換**: 文字種を超えた検索
4. **半角カタカナ対応**: 半角→全角変換と濁点処理
5. **複数バリアント検索**: 一つの検索語で複数の文字表現に対応

### 検索アルゴリズム
- 検索語と対象タイトルの両方を正規化
- 複数のバリアント（表記揺れ）を自動生成
- 任意のバリアント同士でのマッチングを実現

---

**注意**: このテストガイドは、特にタイトルフィルター機能の修正内容と日本語検索強化を中心に作成されています。漢字での部分一致検索が正確に動作することを重点的に確認してください。